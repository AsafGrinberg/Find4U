<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8" />
  <title>Find4U - מדריכים</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- כאן ההדר ייכנס אוטומטית -->
  <div id="header-placeholder"></div>

  <main class="guides-section">
    <h2>מדריכים מומלצים</h2>

    <article class="guide-item">
      <h3>איך להשתמש ב-IPTV</h3>
      <iframe width="320" height="180" src="https://www.tiktok.com/embed/VIDEO_ID_1" frameborder="0" allowfullscreen></iframe>
      <p>הסבר פשוט ונוח לשימוש ב-IPTV בבית.</p>
    </article>

    <article class="guide-item">
      <h3>מדריך לשימוש ב-STREMIO</h3>
      <iframe width="320" height="180" src="https://www.tiktok.com/embed/VIDEO_ID_2" frameborder="0" allowfullscreen></iframe>
      <p>כל מה שצריך לדעת כדי לצפות בתכנים ב-STREMIO.</p>
    </article>
  </main>

  <!-- הקבצים שלך (אם יש, למשל products.js לא דרוש כאן) -->

  <!-- סקריפט לטעינת ההדר + Firebase + ניהול התחברות -->
  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
  import { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyD6o0oDX5ahIw-7E0tUy76ImJDCFWbv4x8",
    authDomain: "find4u-il.firebaseapp.com",
    projectId: "find4u-il",
    storageBucket: "find4u-il.appspot.com",
    messagingSenderId: "1063243167726",
    appId: "1:1063243167726:web:16a8bbaf73ed8181e680ff",
    measurementId: "G-SYR49CZGZZ"
  };

  window.app = initializeApp(firebaseConfig);
  window.auth = getAuth(app);
  window.provider = new GoogleAuthProvider();
  window.signInWithPopup = signInWithPopup;
  window.signOut = signOut;
  window.onAuthStateChanged = onAuthStateChanged;

  // טען HEADER ואז סמן מדריכים
  fetch('header.html')
    .then(response => response.text())
    .then(data => {
      document.getElementById('header-placeholder').innerHTML = data;
      initHeaderEvents();
    const googleLoginBtn = document.getElementById("googleLoginBtn");
    if (googleLoginBtn) {
      googleLoginBtn.addEventListener("click", () => {
        signInWithPopup(auth, provider)
          .then(result => console.log(result))
          .catch(error => console.error(error));
      });
    }

    const logoutBtn = document.getElementById("logoutBtn");
    if (logoutBtn) {
      logoutBtn.addEventListener("click", () => {
        signOut(auth).then(() => console.log("התנתקת"));
      });
    }
      // הוסף active רק ל"מדריכים"
      const buttons = document.querySelectorAll('#categoryButtons button');
      buttons.forEach(btn => {
        btn.classList.remove('active');
        if (btn.textContent.includes("מדריכים")) btn.classList.add('active');
      });
    });

  function initHeaderEvents() {
    const menuToggle = document.querySelector('.menu-toggle');
    const navCategories = document.getElementById('categoryButtons');

    if (menuToggle && navCategories) {
      menuToggle.addEventListener('click', () => {
        navCategories.classList.toggle('show');
      });
    }
  }
</script>
<script>
  function showCategory(category, button) {
    const isGuidesPage = window.location.pathname.includes('guides.html');

    if (category === 'guides') {
      if (!isGuidesPage) {
        window.location.href = 'guides.html';
      }
      return;
    }

    if (isGuidesPage) {
      // אם אתה ב-guides ורוצה לעבור לקטגוריה אחרת => חזור לאינדקס עם הקטגוריה
      window.location.href = `index.html?category=${category}`;
      return;
    }

    // במקרה אחר (לא guides)
    activeCategory = category;

    const buttons = document.querySelectorAll('#categoryButtons button');
    buttons.forEach(btn => btn.classList.remove('active'));
    button.classList.add('active');

    document.getElementById('categoryButtons').classList.remove('show');

    filterProducts();
  }
</script>
<script>
  function activateCategoryButton() {
    const buttons = document.querySelectorAll('#categoryButtons button');
    buttons.forEach(btn => {
      btn.classList.remove('active');
      const btnCategory = btn.getAttribute('onclick').match(/'([^']+)'/)[1];
      if (btnCategory === 'guides') {
        btn.classList.add('active');
      }
    });
  }

  fetch('header.html')
  .then(response => response.text())
  .then(data => {
    document.getElementById('header-placeholder').innerHTML = data;
    initHeaderEvents();
  });

function initHeaderEvents() {
  const menuToggle = document.querySelector('.menu-toggle');
  const navCategories = document.getElementById('categoryButtons');

  if (menuToggle && navCategories) {
    menuToggle.addEventListener('click', () => {
      navCategories.classList.toggle('show');
    });
  }

  // פה אתה יודע שאתה ב-guides => סמן אותו
  activeCategory = 'guides';
  activateCategoryButton();
}

function activateCategoryButton() {
  const buttons = document.querySelectorAll('#categoryButtons button');
  buttons.forEach(btn => {
    btn.classList.remove('active');
    const btnCategory = btn.getAttribute('onclick').match(/'([^']+)'/)[1];
    if (btnCategory === activeCategory) {
      btn.classList.add('active');
    }
  });
}

function showCategory(category, button) {
  const isGuidesPage = window.location.pathname.includes('guides.html');

  if (category === 'guides') {
    if (!isGuidesPage) {
      window.location.href = 'guides.html';
    }
    return;
  }

  if (isGuidesPage) {
    window.location.href = `index.html?category=${category}`;
    return;
  }
}


